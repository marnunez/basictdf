<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>basictdf.tdfForcePlatformsData API documentation</title>
<meta name="description" content="Force platform data module." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>basictdf.tdfForcePlatformsData</code></h1>
</header>
<section id="section-intro">
<p>Force platform data module.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">__doc__ = &#34;&#34;&#34;
Force platform data module.
&#34;&#34;&#34;

from enum import Enum
from basictdf.tdfBlock import Block, BlockType, Sized, BuildWriteable
from basictdf.tdfTypes import i32, u16, SegmentData, TdfType, f32

import numpy as np

PlatDataType = TdfType(
    np.dtype([(&#34;application_point&#34;, &#34;2&lt;f4&#34;), (&#34;force&#34;, &#34;3&lt;f4&#34;), (&#34;torque&#34;, &#34;&lt;f4&#34;)])
)


class ForcePlatformBlockFormat(Enum):
    unknownFormat = 0
    byTrackISSFormat = 1  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS
    byFrameISSFormat = 2  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS
    byTrackISSWithLabelsFormat = 3  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS_WL
    byFrameISSWithLabelsFormat = 4  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS_WL
    byTrackDoubleFormat = 5  # TDF_DATAPLAT_FORMAT_BYTRACK_DBL
    byFrameDoubleFormat = 6  # TDF_DATAPLAT_FORMAT_BYFRAME_DBL
    byTrackDoubleWithLabelsFormat = 7  # TDF_DATAPLAT_FORMAT_BYTRACK_WL_DBL
    byFrameDoubleWithLabelsFormat = 8  # TDF_DATAPLAT_FORMAT_BYFRAME_WL_DBL
    byTrackISSWithVelocityFormat = 9  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS_VEL
    byFrameISSWithVelocityFormat = 10  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS_VEL
    byTrackISSWithLabelsAndVelocityFormat = 11  # TDF_DATAPLAT_FORMAT_BYTRACK_WL_ISS_VEL
    byFrameISSWithLabelsAndVelocityFormat = 12  # TDF_DATAPLAT_FORMAT_BYFRAME_WL_ISS_VEL
    byTrackDoubleWithVelocityFormat = 13  # TDF_DATAPLAT_FORMAT_BYTRACK_DBL_VEL
    byFrameDoubleWithVelocityFormat = 14  # TDF_DATAPLAT_FORMAT_BYFRAME_DBL_VEL


class ForcePlatformData(Sized, BuildWriteable):
    &#34;&#34;&#34;
    Class that stores the data of a force platform,
    such as force, torque and application point.
    &#34;&#34;&#34;

    def __init__(
        self,
        label: str,
        application_point: np.array,
        force: np.array,
        torque: np.array,
    ) -&gt; None:
        self.label = label
        &#34;Force platform label&#34;
        self.application_point = application_point
        &#34;Position of the application point in x,y coordinates&#34;
        self.force = force
        &#34;Force in x,y,z coordinates&#34;
        self.torque = torque
        &#34;Torque in z axis&#34;

    @staticmethod
    def _build(
        stream, format: ForcePlatformBlockFormat, n_frames: int
    ) -&gt; &#34;ForcePlatformData&#34;:
        n_segments = i32.bread(stream)
        i32.skip(stream)  # padding
        segment_data = SegmentData.bread(stream, n_segments)
        data = np.empty(n_frames, dtype=PlatDataType.btype)
        for start_frame, n_frames in segment_data:
            dat = PlatDataType.bread(stream, n_frames)
            data[start_frame : start_frame + n_frames] = dat
        application_point = data[&#34;application_point&#34;]
        force = data[&#34;force&#34;]
        torque = data[&#34;torque&#34;]
        return ForcePlatformData(&#34;&#34;, application_point, force, torque)

    @property
    def _segments(self):
        # Wherever application_point is masked, force and torque are also masked
        maskedData = np.ma.masked_invalid(self.application_point)
        return np.ma.clump_unmasked(maskedData.T[0])

    def _get_segment_data(self, segment):
        start, stop = segment.start, segment.stop
        app_point = self.application_point[start:stop]
        force = self.force[start:stop]
        torque = self.torque[start:stop]
        return np.rec.fromarrays([app_point, force, torque], dtype=PlatDataType.btype)

    def _write(self, stream, format) -&gt; None:
        if format != ForcePlatformBlockFormat.byTrackISSFormat:
            raise NotImplementedError(
                f&#34;ForcePlatformDataBlock format {format} not implemented&#34;
            )
        segments = self._segments
        i32.bwrite(stream, len(segments))
        i32.bpad(stream)
        for segment in segments:
            # startFrame
            i32.bwrite(stream, np.array(segment.start))
            # nFrames
            i32.bwrite(stream, np.array(segment.stop - segment.start))

        for segment in segments:
            PlatDataType.bwrite(stream, self._get_segment_data(segment))

    @property
    def nBytes(self) -&gt; int:
        &#34;Size in bytes of the platform data&#34;
        nSegments = len(self._segments)

        base = 4 + 4 + (4 + 4) * nSegments

        for segment in self._segments:
            base += PlatDataType.btype.itemsize * (segment.stop - segment.start)

        return base

    def __repr__(self):
        return (
            &#34;&lt;ForcePlatformData &#34;
            f&#34;application_point={self.application_point}, &#34;
            f&#34;force={self.force}, &#34;
            f&#34;torque={self.torque}&gt;&#34;
        )

    def __eq__(self, __value: object) -&gt; bool:
        return (
            isinstance(__value, ForcePlatformData)
            and np.allclose(self.application_point, __value.application_point)
            and np.allclose(self.force, __value.force)
            and np.allclose(self.torque, __value.torque)
        )


class ForcePlatformsDataBlock(Block):
    &#34;&#34;&#34;
    Block that stores the data of a force platform,
    such as force, torque and application point.
    &#34;&#34;&#34;

    type = BlockType.forcePlatformsData

    def __init__(
        self,
        start_time,
        frequency,
        n_frames,
        format=ForcePlatformBlockFormat.byTrackISSFormat,
    ) -&gt; None:
        super().__init__()
        self.format = format
        self._plat_map = []
        self._platforms = []

        self.start_time = start_time
        &#34;Start time of the capture&#34;
        self.frequency = frequency
        &#34;Frequency of the capture in Hz&#34;
        self.n_frames = n_frames
        &#34;Number of frames captured&#34;

    @staticmethod
    def _build(stream, format) -&gt; &#34;ForcePlatformsDataBlock&#34;:
        format = ForcePlatformBlockFormat(format)
        if format != ForcePlatformBlockFormat.byTrackISSFormat:
            raise NotImplementedError(
                f&#34;ForcePlatformDataBlock format {format} not implemented&#34;
            )
        n_plats = i32.bread(stream)
        frequency = i32.bread(stream)
        start_time = f32.bread(stream)
        n_frames = i32.bread(stream)
        plat_map = u16.bread(stream, n_plats)
        platforms = [
            ForcePlatformData._build(stream, format, n_frames) for _ in range(n_plats)
        ]
        block = ForcePlatformsDataBlock(start_time, frequency, n_frames)
        block._plat_map = plat_map
        block._platforms = platforms

        return block

    def _write(self, stream) -&gt; None:
        i32.bwrite(stream, len(self._platforms))
        i32.bwrite(stream, self.frequency)
        f32.bwrite(stream, self.start_time)
        i32.bwrite(stream, self.n_frames)
        u16.bwrite(stream, self._plat_map)
        for plat in self._platforms:
            plat._write(stream, self.format)

    def __iter__(self):
        &#34;&#34;&#34;
        Iterates over the platforms in the block.
        Returns a tuple of (channel, platform)
        &#34;&#34;&#34;
        return iter(zip(self._plat_map, self._platforms))

    def add_platform(self, platform: ForcePlatformData, channel: int = None) -&gt; None:
        &#34;&#34;&#34;
        Adds a platform to the block. If channel is specified and it&#39;s not already
        in use, the platform is added to that channel. Otherwise, the platform is
        added to the next available channel.

        Args:
            platform (ForcePlatformData): The platform to add

        &#34;&#34;&#34;
        if channel is None:
            channel = len(self._platforms)
        if channel in self._plat_map:
            raise ValueError(f&#34;Channel {channel} already in use&#34;)
        self._plat_map.append(channel)
        self._platforms.append(platform)

    @property
    def nBytes(self) -&gt; int:
        return (
            4  # nPlatforms
            + 4  # frequency
            + 4  # startTime
            + 4  # nFrames
            + len(self._platforms) * 2  # platMap
            + sum(plat.nBytes for plat in self._platforms)
        )

    def __eq__(self, o: object) -&gt; bool:
        if not isinstance(o, ForcePlatformsDataBlock):
            return False
        return (
            self.start_time == o.start_time
            and self.frequency == o.frequency
            and self.n_frames == o.n_frames
            and np.array_equal(self._plat_map, o._plat_map)
            and all(plat == oplat for plat, oplat in zip(self._platforms, o._platforms))
        )

    def __repr__(self) -&gt; str:
        return (
            &#34;&lt;ForcePlatformsDataBlock &#34;
            f&#34;format={self.format.name}, &#34;
            f&#34;nPlatforms={len(self._platforms)}, &#34;
            f&#34;frequency={self.frequency}, &#34;
            f&#34;startTime={self.start_time}&gt;&#34;
        )</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat"><code class="flex name class">
<span>class <span class="ident">ForcePlatformBlockFormat</span></span>
<span>(</span><span>value, names=None, *, module=None, qualname=None, type=None, start=1)</span>
</code></dt>
<dd>
<div class="desc"><p>An enumeration.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ForcePlatformBlockFormat(Enum):
    unknownFormat = 0
    byTrackISSFormat = 1  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS
    byFrameISSFormat = 2  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS
    byTrackISSWithLabelsFormat = 3  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS_WL
    byFrameISSWithLabelsFormat = 4  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS_WL
    byTrackDoubleFormat = 5  # TDF_DATAPLAT_FORMAT_BYTRACK_DBL
    byFrameDoubleFormat = 6  # TDF_DATAPLAT_FORMAT_BYFRAME_DBL
    byTrackDoubleWithLabelsFormat = 7  # TDF_DATAPLAT_FORMAT_BYTRACK_WL_DBL
    byFrameDoubleWithLabelsFormat = 8  # TDF_DATAPLAT_FORMAT_BYFRAME_WL_DBL
    byTrackISSWithVelocityFormat = 9  # TDF_DATAPLAT_FORMAT_BYTRACK_ISS_VEL
    byFrameISSWithVelocityFormat = 10  # TDF_DATAPLAT_FORMAT_BYFRAME_ISS_VEL
    byTrackISSWithLabelsAndVelocityFormat = 11  # TDF_DATAPLAT_FORMAT_BYTRACK_WL_ISS_VEL
    byFrameISSWithLabelsAndVelocityFormat = 12  # TDF_DATAPLAT_FORMAT_BYFRAME_WL_ISS_VEL
    byTrackDoubleWithVelocityFormat = 13  # TDF_DATAPLAT_FORMAT_BYTRACK_DBL_VEL
    byFrameDoubleWithVelocityFormat = 14  # TDF_DATAPLAT_FORMAT_BYFRAME_DBL_VEL</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleFormat"><code class="name">var <span class="ident">byFrameDoubleFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithLabelsFormat"><code class="name">var <span class="ident">byFrameDoubleWithLabelsFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithVelocityFormat"><code class="name">var <span class="ident">byFrameDoubleWithVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSFormat"><code class="name">var <span class="ident">byFrameISSFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsAndVelocityFormat"><code class="name">var <span class="ident">byFrameISSWithLabelsAndVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsFormat"><code class="name">var <span class="ident">byFrameISSWithLabelsFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithVelocityFormat"><code class="name">var <span class="ident">byFrameISSWithVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleFormat"><code class="name">var <span class="ident">byTrackDoubleFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithLabelsFormat"><code class="name">var <span class="ident">byTrackDoubleWithLabelsFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithVelocityFormat"><code class="name">var <span class="ident">byTrackDoubleWithVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSFormat"><code class="name">var <span class="ident">byTrackISSFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsAndVelocityFormat"><code class="name">var <span class="ident">byTrackISSWithLabelsAndVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsFormat"><code class="name">var <span class="ident">byTrackISSWithLabelsFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithVelocityFormat"><code class="name">var <span class="ident">byTrackISSWithVelocityFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.unknownFormat"><code class="name">var <span class="ident">unknownFormat</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData"><code class="flex name class">
<span>class <span class="ident">ForcePlatformData</span></span>
<span>(</span><span>label: str, application_point: <built-in function array>, force: <built-in function array>, torque: <built-in function array>)</span>
</code></dt>
<dd>
<div class="desc"><p>Class that stores the data of a force platform,
such as force, torque and application point.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ForcePlatformData(Sized, BuildWriteable):
    &#34;&#34;&#34;
    Class that stores the data of a force platform,
    such as force, torque and application point.
    &#34;&#34;&#34;

    def __init__(
        self,
        label: str,
        application_point: np.array,
        force: np.array,
        torque: np.array,
    ) -&gt; None:
        self.label = label
        &#34;Force platform label&#34;
        self.application_point = application_point
        &#34;Position of the application point in x,y coordinates&#34;
        self.force = force
        &#34;Force in x,y,z coordinates&#34;
        self.torque = torque
        &#34;Torque in z axis&#34;

    @staticmethod
    def _build(
        stream, format: ForcePlatformBlockFormat, n_frames: int
    ) -&gt; &#34;ForcePlatformData&#34;:
        n_segments = i32.bread(stream)
        i32.skip(stream)  # padding
        segment_data = SegmentData.bread(stream, n_segments)
        data = np.empty(n_frames, dtype=PlatDataType.btype)
        for start_frame, n_frames in segment_data:
            dat = PlatDataType.bread(stream, n_frames)
            data[start_frame : start_frame + n_frames] = dat
        application_point = data[&#34;application_point&#34;]
        force = data[&#34;force&#34;]
        torque = data[&#34;torque&#34;]
        return ForcePlatformData(&#34;&#34;, application_point, force, torque)

    @property
    def _segments(self):
        # Wherever application_point is masked, force and torque are also masked
        maskedData = np.ma.masked_invalid(self.application_point)
        return np.ma.clump_unmasked(maskedData.T[0])

    def _get_segment_data(self, segment):
        start, stop = segment.start, segment.stop
        app_point = self.application_point[start:stop]
        force = self.force[start:stop]
        torque = self.torque[start:stop]
        return np.rec.fromarrays([app_point, force, torque], dtype=PlatDataType.btype)

    def _write(self, stream, format) -&gt; None:
        if format != ForcePlatformBlockFormat.byTrackISSFormat:
            raise NotImplementedError(
                f&#34;ForcePlatformDataBlock format {format} not implemented&#34;
            )
        segments = self._segments
        i32.bwrite(stream, len(segments))
        i32.bpad(stream)
        for segment in segments:
            # startFrame
            i32.bwrite(stream, np.array(segment.start))
            # nFrames
            i32.bwrite(stream, np.array(segment.stop - segment.start))

        for segment in segments:
            PlatDataType.bwrite(stream, self._get_segment_data(segment))

    @property
    def nBytes(self) -&gt; int:
        &#34;Size in bytes of the platform data&#34;
        nSegments = len(self._segments)

        base = 4 + 4 + (4 + 4) * nSegments

        for segment in self._segments:
            base += PlatDataType.btype.itemsize * (segment.stop - segment.start)

        return base

    def __repr__(self):
        return (
            &#34;&lt;ForcePlatformData &#34;
            f&#34;application_point={self.application_point}, &#34;
            f&#34;force={self.force}, &#34;
            f&#34;torque={self.torque}&gt;&#34;
        )

    def __eq__(self, __value: object) -&gt; bool:
        return (
            isinstance(__value, ForcePlatformData)
            and np.allclose(self.application_point, __value.application_point)
            and np.allclose(self.force, __value.force)
            and np.allclose(self.torque, __value.torque)
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>basictdf.tdfBlock.Sized</li>
<li>basictdf.tdfBlock.BuildWriteable</li>
<li>abc.ABC</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData.application_point"><code class="name">var <span class="ident">application_point</span></code></dt>
<dd>
<div class="desc"><p>Position of the application point in x,y coordinates</p></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData.force"><code class="name">var <span class="ident">force</span></code></dt>
<dd>
<div class="desc"><p>Force in x,y,z coordinates</p></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData.label"><code class="name">var <span class="ident">label</span></code></dt>
<dd>
<div class="desc"><p>Force platform label</p></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData.nBytes"><code class="name">var <span class="ident">nBytes</span> : int</code></dt>
<dd>
<div class="desc"><p>Size in bytes of the platform data</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def nBytes(self) -&gt; int:
    &#34;Size in bytes of the platform data&#34;
    nSegments = len(self._segments)

    base = 4 + 4 + (4 + 4) * nSegments

    for segment in self._segments:
        base += PlatDataType.btype.itemsize * (segment.stop - segment.start)

    return base</code></pre>
</details>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformData.torque"><code class="name">var <span class="ident">torque</span></code></dt>
<dd>
<div class="desc"><p>Torque in z axis</p></div>
</dd>
</dl>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock"><code class="flex name class">
<span>class <span class="ident">ForcePlatformsDataBlock</span></span>
<span>(</span><span>start_time, frequency, n_frames, format=ForcePlatformBlockFormat.byTrackISSFormat)</span>
</code></dt>
<dd>
<div class="desc"><p>Block that stores the data of a force platform,
such as force, torque and application point.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ForcePlatformsDataBlock(Block):
    &#34;&#34;&#34;
    Block that stores the data of a force platform,
    such as force, torque and application point.
    &#34;&#34;&#34;

    type = BlockType.forcePlatformsData

    def __init__(
        self,
        start_time,
        frequency,
        n_frames,
        format=ForcePlatformBlockFormat.byTrackISSFormat,
    ) -&gt; None:
        super().__init__()
        self.format = format
        self._plat_map = []
        self._platforms = []

        self.start_time = start_time
        &#34;Start time of the capture&#34;
        self.frequency = frequency
        &#34;Frequency of the capture in Hz&#34;
        self.n_frames = n_frames
        &#34;Number of frames captured&#34;

    @staticmethod
    def _build(stream, format) -&gt; &#34;ForcePlatformsDataBlock&#34;:
        format = ForcePlatformBlockFormat(format)
        if format != ForcePlatformBlockFormat.byTrackISSFormat:
            raise NotImplementedError(
                f&#34;ForcePlatformDataBlock format {format} not implemented&#34;
            )
        n_plats = i32.bread(stream)
        frequency = i32.bread(stream)
        start_time = f32.bread(stream)
        n_frames = i32.bread(stream)
        plat_map = u16.bread(stream, n_plats)
        platforms = [
            ForcePlatformData._build(stream, format, n_frames) for _ in range(n_plats)
        ]
        block = ForcePlatformsDataBlock(start_time, frequency, n_frames)
        block._plat_map = plat_map
        block._platforms = platforms

        return block

    def _write(self, stream) -&gt; None:
        i32.bwrite(stream, len(self._platforms))
        i32.bwrite(stream, self.frequency)
        f32.bwrite(stream, self.start_time)
        i32.bwrite(stream, self.n_frames)
        u16.bwrite(stream, self._plat_map)
        for plat in self._platforms:
            plat._write(stream, self.format)

    def __iter__(self):
        &#34;&#34;&#34;
        Iterates over the platforms in the block.
        Returns a tuple of (channel, platform)
        &#34;&#34;&#34;
        return iter(zip(self._plat_map, self._platforms))

    def add_platform(self, platform: ForcePlatformData, channel: int = None) -&gt; None:
        &#34;&#34;&#34;
        Adds a platform to the block. If channel is specified and it&#39;s not already
        in use, the platform is added to that channel. Otherwise, the platform is
        added to the next available channel.

        Args:
            platform (ForcePlatformData): The platform to add

        &#34;&#34;&#34;
        if channel is None:
            channel = len(self._platforms)
        if channel in self._plat_map:
            raise ValueError(f&#34;Channel {channel} already in use&#34;)
        self._plat_map.append(channel)
        self._platforms.append(platform)

    @property
    def nBytes(self) -&gt; int:
        return (
            4  # nPlatforms
            + 4  # frequency
            + 4  # startTime
            + 4  # nFrames
            + len(self._platforms) * 2  # platMap
            + sum(plat.nBytes for plat in self._platforms)
        )

    def __eq__(self, o: object) -&gt; bool:
        if not isinstance(o, ForcePlatformsDataBlock):
            return False
        return (
            self.start_time == o.start_time
            and self.frequency == o.frequency
            and self.n_frames == o.n_frames
            and np.array_equal(self._plat_map, o._plat_map)
            and all(plat == oplat for plat, oplat in zip(self._platforms, o._platforms))
        )

    def __repr__(self) -&gt; str:
        return (
            &#34;&lt;ForcePlatformsDataBlock &#34;
            f&#34;format={self.format.name}, &#34;
            f&#34;nPlatforms={len(self._platforms)}, &#34;
            f&#34;frequency={self.frequency}, &#34;
            f&#34;startTime={self.start_time}&gt;&#34;
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="basictdf.tdfBlock.Block" href="tdfBlock.html#basictdf.tdfBlock.Block">Block</a></li>
<li>basictdf.tdfBlock.Sized</li>
<li>basictdf.tdfBlock.BuildWriteable</li>
<li>abc.ABC</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.type"><code class="name">var <span class="ident">type</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.frequency"><code class="name">var <span class="ident">frequency</span></code></dt>
<dd>
<div class="desc"><p>Frequency of the capture in Hz</p></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.nBytes"><code class="name">var <span class="ident">nBytes</span> : int</code></dt>
<dd>
<div class="desc"><p>Size in bytes</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def nBytes(self) -&gt; int:
    return (
        4  # nPlatforms
        + 4  # frequency
        + 4  # startTime
        + 4  # nFrames
        + len(self._platforms) * 2  # platMap
        + sum(plat.nBytes for plat in self._platforms)
    )</code></pre>
</details>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.n_frames"><code class="name">var <span class="ident">n_frames</span></code></dt>
<dd>
<div class="desc"><p>Number of frames captured</p></div>
</dd>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.start_time"><code class="name">var <span class="ident">start_time</span></code></dt>
<dd>
<div class="desc"><p>Start time of the capture</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.add_platform"><code class="name flex">
<span>def <span class="ident">add_platform</span></span>(<span>self, platform: <a title="basictdf.tdfForcePlatformsData.ForcePlatformData" href="#basictdf.tdfForcePlatformsData.ForcePlatformData">ForcePlatformData</a>, channel: int = None) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a platform to the block. If channel is specified and it's not already
in use, the platform is added to that channel. Otherwise, the platform is
added to the next available channel.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>platform</code></strong> :&ensp;<code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData" href="#basictdf.tdfForcePlatformsData.ForcePlatformData">ForcePlatformData</a></code></dt>
<dd>The platform to add</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_platform(self, platform: ForcePlatformData, channel: int = None) -&gt; None:
    &#34;&#34;&#34;
    Adds a platform to the block. If channel is specified and it&#39;s not already
    in use, the platform is added to that channel. Otherwise, the platform is
    added to the next available channel.

    Args:
        platform (ForcePlatformData): The platform to add

    &#34;&#34;&#34;
    if channel is None:
        channel = len(self._platforms)
    if channel in self._plat_map:
        raise ValueError(f&#34;Channel {channel} already in use&#34;)
    self._plat_map.append(channel)
    self._platforms.append(platform)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="basictdf" href="index.html">basictdf</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat">ForcePlatformBlockFormat</a></code></h4>
<ul class="">
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleFormat">byFrameDoubleFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithLabelsFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithLabelsFormat">byFrameDoubleWithLabelsFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameDoubleWithVelocityFormat">byFrameDoubleWithVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSFormat">byFrameISSFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsAndVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsAndVelocityFormat">byFrameISSWithLabelsAndVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithLabelsFormat">byFrameISSWithLabelsFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byFrameISSWithVelocityFormat">byFrameISSWithVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleFormat">byTrackDoubleFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithLabelsFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithLabelsFormat">byTrackDoubleWithLabelsFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackDoubleWithVelocityFormat">byTrackDoubleWithVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSFormat">byTrackISSFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsAndVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsAndVelocityFormat">byTrackISSWithLabelsAndVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithLabelsFormat">byTrackISSWithLabelsFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithVelocityFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.byTrackISSWithVelocityFormat">byTrackISSWithVelocityFormat</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.unknownFormat" href="#basictdf.tdfForcePlatformsData.ForcePlatformBlockFormat.unknownFormat">unknownFormat</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData" href="#basictdf.tdfForcePlatformsData.ForcePlatformData">ForcePlatformData</a></code></h4>
<ul class="">
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData.application_point" href="#basictdf.tdfForcePlatformsData.ForcePlatformData.application_point">application_point</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData.force" href="#basictdf.tdfForcePlatformsData.ForcePlatformData.force">force</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData.label" href="#basictdf.tdfForcePlatformsData.ForcePlatformData.label">label</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData.nBytes" href="#basictdf.tdfForcePlatformsData.ForcePlatformData.nBytes">nBytes</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformData.torque" href="#basictdf.tdfForcePlatformsData.ForcePlatformData.torque">torque</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock">ForcePlatformsDataBlock</a></code></h4>
<ul class="two-column">
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.add_platform" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.add_platform">add_platform</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.frequency" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.frequency">frequency</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.nBytes" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.nBytes">nBytes</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.n_frames" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.n_frames">n_frames</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.start_time" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.start_time">start_time</a></code></li>
<li><code><a title="basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.type" href="#basictdf.tdfForcePlatformsData.ForcePlatformsDataBlock.type">type</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>